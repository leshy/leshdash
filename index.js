(function(){
  var lodash, assign, lib, abstractPad, dChars, slice$ = [].slice;
  lodash = require('lodash'), assign = lodash.assign;
  lib = assign(require('./curried'), {
    w: require('./wrap')
  });
  lib.jsonQuery = function(path, object, seperator){
    seperator == null && (seperator = "_");
    if (path.constructor === String) {
      path = path.split(seperator);
    }
    if (!path.length) {
      return object;
    } else {
      return lib.jsonQuery(lodash.tail(path), object[lodash.head(path)]);
    }
  };
  lib.jsonError = function(error){
    var serializeError;
    serializeError = function(error){
      return {
        stack: error.stack,
        name: error.name,
        message: error.message
      };
    };
    switch (error.constructor) {
    case Error:
      return serializeError(error);
    default:
      return {
        name: error.constructor.name,
        message: String(error)
      };
    }
  };
  lib.wait = function(t, f){
    return setTimeout(f, t);
  };
  lib.waitCancel = function(t, f){
    var id;
    id = lib.wait(t, f);
    return function(){
      return clearTimeout(id);
    };
  };
  lib.abstractPad = abstractPad = function(operation, success, text){
    var modifyText;
    if (text == null) {
      text = "";
    }
    if (text.constructor !== String) {
      text = String(text);
    }
    modifyText = function(text){
      if (success(text)) {
        return text;
      } else {
        return modifyText(operation(text));
      }
    };
    return modifyText(text);
  };
  lib.pad = function(text, length, chr){
    chr == null && (chr = 0);
    return abstractPad(function(text){
      return chr + text;
    }, function(text){
      return text.length >= length;
    }, text);
  };
  lib.rpad = function(text, length, chr){
    chr == null && (chr = 0);
    return abstractPad(function(text){
      return text + chr;
    }, function(text){
      return text.length >= length;
    }, text);
  };
  lib.antipad = function(text, chr){
    chr == null && (chr = "0");
    return abstractPad(function(text){
      return text.slice(0, text.length - 1);
    }, function(text){
      return text[text.length - 1] === chr;
    }, text);
  };
  lib.push = function(array){
    var stuff;
    stuff = slice$.call(arguments, 1);
    return array.concat(stuff);
  };
  lib.pop = function(object, key){
    var ret;
    ret = object[key];
    delete object.key;
    return ret;
  };
  dChars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');
  lib.token = function(targetLen, chars){
    var ret;
    targetLen == null && (targetLen = 25);
    chars == null && (chars = dChars);
    ret = [];
    while (ret.length < targetLen) {
      ret.push(lodash.sample(chars));
    }
    return ret.join('');
  };
  module.exports = lodash.assign(lib, lodash);
}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2xlc2gvY29kaW5nL3Jlc2JvdS9jb3JlL25vZGVfbW9kdWxlcy9sZXNoZGFzaC9pbmRleC5scyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztFQUNXLE1BQUEsR0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBLEVBQVUsTUFBVixDQUFBLENBQUEsQ0FBQSxNQUFBLENBQVU7RUFFckIsR0FBSSxDQUFBLENBQUEsQ0FBRSxPQUNKLFFBQVEsV0FBQSxHQUNSO0lBQUEsR0FBRyxRQUFRLFFBQUE7RUFBWCxDQURBO0VBR0YsR0FBRyxDQUFDLFNBQVUsQ0FBQSxDQUFBLENBQUUsUUFBQSxDQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsU0FBQTtJQUFlLHNCQUFBLFlBQWE7SUFDMUMsSUFBRyxJQUFJLENBQUEsV0FBRyxDQUFBLEdBQUEsQ0FBRyxNQUFiO01BQXlCLElBQUssQ0FBQSxDQUFBLENBQUUsSUFBSSxDQUFDLE1BQU0sU0FBQTs7SUFFM0MsSUFBRyxDQUFJLElBQUksQ0FBQyxNQUFaO01BQXdCLE1BQUEsQ0FBTyxNQUFQO0tBQ3hCO2FBQUssR0FBRyxDQUFDLFVBQVUsTUFBTSxDQUFDLEtBQUssSUFBRCxHQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBUixDQUFhLElBQUEsQ0FBYixDQUF6Qjs7O0VBR3JCLEdBQUcsQ0FBQyxTQUFVLENBQUEsQ0FBQSxDQUFFLFFBQUEsQ0FBQSxLQUFBOztJQUNaLGNBQWUsQ0FBQSxDQUFBLENBQUUsUUFBQSxDQUFBLEtBQUE7YUFDZjtRQUFBLE9BQU8sS0FBSyxDQUFDO1FBQ2IsTUFBTSxLQUFLLENBQUM7UUFDWixTQUFTLEtBQUssQ0FBQztNQUZmOztJQUlGLFFBQU8sS0FBSyxDQUFDLFdBQWI7QUFBQSxJQUNJLEtBQUEsS0FBQTtBQUFBLGFBQVMsZUFBZSxLQUFBOzthQUNYO1FBQUUsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDO1FBQU0sU0FBUyxPQUFPLEtBQUQ7TUFBL0M7OztFQUVyQixHQUFHLENBQUMsSUFB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TUFBTCIsInNvdXJjZXNDb250ZW50IjpbIiMgYXV0b2NvbXBpbGVcbnJlcXVpcmUhIHsgbG9kYXNoOiB7IGFzc2lnbiB9OmxvZGFzaCB9XG5cbmxpYiA9IGFzc2lnbiBkb1xuICByZXF1aXJlICcuL2N1cnJpZWQnXG4gIHc6IHJlcXVpcmUgJy4vd3JhcCdcbiAgXG5saWIuanNvblF1ZXJ5ID0gKHBhdGgsIG9iamVjdCwgc2VwZXJhdG9yPVwiX1wiKSAtPiBcbiAgaWYgcGF0aEBAIGlzIFN0cmluZyB0aGVuIHBhdGggPSBwYXRoLnNwbGl0IHNlcGVyYXRvclxuXG4gIGlmIG5vdCBwYXRoLmxlbmd0aCB0aGVuIHJldHVybiBvYmplY3RcbiAgZWxzZSBsaWIuanNvblF1ZXJ5IGxvZGFzaC50YWlsKHBhdGgpLCBvYmplY3RbbG9kYXNoLmhlYWQgcGF0aF1cbiAgICAgIFxuXG5saWIuanNvbkVycm9yID0gKGVycm9yKSAtPlxuICAgIHNlcmlhbGl6ZUVycm9yID0gKGVycm9yKSAtPiBkb1xuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrXG4gICAgICBuYW1lOiBlcnJvci5uYW1lXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgXG4gICAgc3dpdGNoIGVycm9yLmNvbnN0cnVjdG9yXG4gICAgICB8IEVycm9yID0+IHNlcmlhbGl6ZUVycm9yIGVycm9yXG4gICAgICB8IG90aGVyd2lzZSA9PiB7IG5hbWU6IGVycm9yLmNvbnN0cnVjdG9yLm5hbWUsIG1lc3NhZ2U6IFN0cmluZyhlcnJvcikgfVxuXG5saWIud2FpdCA9ICh0LCBmKSAtPiBzZXRUaW1lb3V0IGYsIHRcblxubGliLndhaXRDYW5jZWwgPSAodCwgZikgLT5cbiAgaWQgPSBsaWIud2FpdCB0LCBmXG4gIC0+IGNsZWFyVGltZW91dCBpZFxuXG5saWIuYWJzdHJhY3RQYWQgPSBhYnN0cmFjdFBhZCA9IChvcGVyYXRpb24sIHN1Y2Nlc3MsIHRleHQpIC0+XG4gICAgaWYgbm90IHRleHQ/IHRoZW4gdGV4dCA9IFwiXCJcbiAgICBpZiB0ZXh0LmNvbnN0cnVjdG9yIGlzbnQgU3RyaW5nIHRoZW4gdGV4dCA9IFN0cmluZyB0ZXh0XG5cbiAgICBtb2RpZnlUZXh0ID0gKHRleHQpIC0+XG4gICAgICAgIGlmIHN1Y2Nlc3ModGV4dCkgdGhlbiByZXR1cm4gdGV4dFxuICAgICAgICBlbHNlIG1vZGlmeVRleHQgb3BlcmF0aW9uIHRleHRcblxuICAgIG1vZGlmeVRleHQgdGV4dFxuXG5saWIucGFkID0gKHRleHQsbGVuZ3RoLGNocj0wKSAtPlxuICAgIGFic3RyYWN0UGFkKFxuICAgICAgICAoKHRleHQpIC0+IGNociArIHRleHQpLFxuICAgICAgICAoKHRleHQpIC0+IHRleHQubGVuZ3RoID49IGxlbmd0aCksXG4gICAgICAgIHRleHQpXG5cbmxpYi5ycGFkID0gKHRleHQsbGVuZ3RoLGNocj0wKSAtPlxuICAgIGFic3RyYWN0UGFkKFxuICAgICAgICAoKHRleHQpIC0+IHRleHQgKyBjaHIpLFxuICAgICAgICAoKHRleHQpIC0+IHRleHQubGVuZ3RoID49IGxlbmd0aCksXG4gICAgICAgIHRleHQpXG5cbmxpYi5hbnRpcGFkID0gKHRleHQsY2hyPVwiMFwiKSAtPlxuICAgIGFic3RyYWN0UGFkKFxuICAgICAgICAoKHRleHQpIC0+IHRleHQuc2xpY2UoMCwgdGV4dC5sZW5ndGggLSAxKSksXG4gICAgICAgICgodGV4dCkgLT4gdGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIGlzIGNociksXG4gICAgICAgIHRleHQpXG5cbiMgaW1tdXRhYmxlIHB1c2hcbmxpYi5wdXNoID0gKGFycmF5LCAuLi5zdHVmZikgLT4gYXJyYXkuY29uY2F0IHN0dWZmICBcblxubGliLnBvcCA9IChvYmplY3QsIGtleSkgLT5cbiAgcmV0ID0gb2JqZWN0W2tleV1cbiAgZGVsZXRlIG9iamVjdC5rZXlcbiAgcmV0XG5cbmRDaGFycyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicuc3BsaXQgJydcblxubGliLnRva2VuID0gKHRhcmdldExlbj0yNSwgY2hhcnM9ZENoYXJzKSAtPlxuICByZXQgPSBbXVxuICB3aGlsZSByZXQubGVuZ3RoIDwgdGFyZ2V0TGVuXG4gICAgcmV0LnB1c2ggbG9kYXNoLnNhbXBsZSBjaGFyc1xuICByZXQuam9pbiAnJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxvZGFzaC5hc3NpZ24gbGliLCBsb2Rhc2hcbiJdfQ==
